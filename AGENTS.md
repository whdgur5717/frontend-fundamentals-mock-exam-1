# AGENTS 가이드: 토스 적금 계산기 (Savings Calculator)

아래는 과제의 전체 그림과 구현 범위를 에이전트가 빠르게 파악할 수 있도록 재정리한 문서입니다. 콘텐츠(요구사항, 규칙, 수식)는 그대로 유지하되, 구조와 포맷만 개선했습니다.

---

## 1) 과제 개요

- 과제 이름: 토스 적금 계산기 (Savings Calculator)
- 목적
  - 사용자가 목표 금액과 저축 기간을 입력하면,
  - 그 목표를 달성하기 위해 필요한 월 납입액을 계산하고,
  - 조건에 맞는 적금 상품을 필터링/추천해주는 웹 페이지를 만드는 과제입니다.
- 페이지 구조
  - 기본 마크업: `src/pages/SavingsCalculatorPage.tsx`
  - 채워 넣을 부분: 데이터 연동, 상태 관리, 비즈니스 로직, 탭 전환, 계산 로직

---

## 2) 유저 플로우 (end-to-end)

1. 페이지 로드 시
   - 서버에서 적금 상품 목록을 불러와서 화면에 표시합니다.
2. 입력 단계
   - 목표 금액, 월 납입액, 저축 기간(개월)을 입력합니다.
   - 입력값에 따라 조건에 맞는 적금 상품만 리스트에 노출됩니다.
3. 상품 선택
   - 상품 리스트에서 하나의 상품을 선택합니다.
4. 탭 전환 → “계산 결과”
   - 선택한 상품과 입력값을 기반으로 다음 정보를 표시합니다:
     - 예상 수익 금액
     - 목표 금액과의 차이
     - 목표 달성을 위한 추천 월 납입액
   - 조건에 맞는 상품들 중 연이자율 상위 2개를 추천 상품으로 표시합니다.

> 목표: 이 흐름이 하나의 작은 서비스처럼 자연스럽게 성립하도록 구현

---

## 3) 구현 항목 (기능별 세부 요구사항)

### 3-1. 적금 상품 목록 연동 및 표시

- API: `GET /api/savings-products`
- 클라이언트: `tosslib`의 `http` 사용
- 데이터: 응답의 `SavingsProduct[]`를 상태에 저장 후 렌더링
- 금액 표시: `minMonthlyAmount`, `maxMonthlyAmount`, 월 납입액 등은 천 단위 콤마 적용하여 "10,000원" 형태로 표시

---

### 3-2. 저축 목표 입력 + 상품 필터링

- 입력값
  - 목표 금액
  - 월 납입액
  - 저축 기간(개월)
- 필터링 대상: 하단 `ProductList`에 노출되는 상품들
- 필터링 조건 (각 `product`에 대해)
  1) 월 납입액 범위
     - `product.minMonthlyAmount` < 입력한 월 납입액
     - 입력한 월 납입액 < `product.maxMonthlyAmount`
  2) 저축 기간 일치
     - 입력한 저축 기간 === `product.availableTerms`
- 위 조건을 만족하는 상품만 리스트에 노출

---

### 3-3. 상품 단일 선택

- 정확히 하나의 상품만 선택 가능
- 선택된 상품은 오른쪽에 선택 아이콘으로 상태 표현
- 선택 상태는 상단 공통 상태 등에서 관리 (이후 “계산 결과” 탭에서 사용)

---

### 3-4. “계산 결과” 탭

- 탭 전환
  - “계산 결과” 탭 클릭 시 `CalculationResult` 컴포넌트 표시
  - `SavingsCalculatorPage`에서 탭 상태를 관리하고 조건부 렌더링 구현

- (1) 선택 상품 기반 계산 결과
  - 입력값
    - 월 납입액 (사용자 입력)
    - 저축 기간 (사용자 입력)
    - 선택된 상품의 연이자율 (`annualRate`)
  - 계산식
    - 예상 수익 금액(최종 금액)
      ```text
      최종 금액 = 월 납입액 * 저축 기간 * (1 + 연이자율 * 0.5)
      ```
    - 목표 금액과의 차이
      ```text
      목표 금액과의 차이 = 목표 금액 - 예상 수익 금액
      ```
    - 추천 월 납입 금액
      ```text
      월 납입액 = 목표 금액 ÷ (저축 기간 * (1 + 연이자율 * 0.5))
      ```
    - 표시 규칙: 추천 월 납입액은 1,000원 단위로 반올림하여 표시
  - 예외 처리
    - 선택된 상품이 없으면 “상품을 선택해주세요” 문구 노출

- (2) 추천 상품 목록 (연이자율 Top 2)
  - 저축 목표 입력 단계의 동일 필터(월 납입액, 저축 기간)를 적용한 상품들 중
  - `annualRate`가 높은 순으로 정렬하여 상위 2개를 추천 상품으로 표시
  - 사용자가 선택한 상품이 추천 목록에 있으면 선택 아이콘을 동일하게 표시

---

## 4) 비기능/설계 고려사항

- 유지보수/확장성
  - API 연동, 필터링 로직, 계산 로직, UI 컴포넌트를 적절히 분리
  - 상품 스펙/계산 방식 변경 시 수정 범위를 최소화할 수 있는 구조
- 사용자 경험(UX)
  - 입력값 없음/잘못된 값 등 엣지 케이스 처리
  - 로딩/에러 상태 처리
  - 전부 구현하지 못해도 README 등에 개선 아이디어를 기록
- 합리적인 가정
  - 애매한 부분은 스스로 가정을 세우고, 코드 또는 README에 명시

---

## 5) 요약 체크리스트

- [ ] API로 상품 데이터 가져오기
- [ ] 입력 폼과 필터링 로직으로 상품 추리기
- [ ] 상품 단일 선택 상태 관리
- [ ] 선택된 상품 + 입력값 기반 계산 (예상 수익, 목표 차이, 추천 월 납입액)
- [ ] 추천 상품 Top 2 (연이자율 기준)
- [ ] 유지보수하기 좋은 구조로 설계

본 문서는 요구사항의 의미를 변경하지 않고, 구조화와 가독성 향상을 위해 포맷만 개선했습니다.
